---
import Layout from "@/layouts/Layout.astro";
import { RequestResetForm } from "@/components/auth/RequestResetForm";
import { StatusAlert } from "@/components/StatusAlert";
import { isFeatureEnabled } from "@/features";

export const prerender = false;

if (!isFeatureEnabled("auth")) {
  return Astro.redirect("/");
}

const reason = Astro.url.searchParams.get("reason");
const showExpiredAlert = reason === "expired";
---

<Layout title="Reset hasła - 10xCards">
  <div class="container mx-auto px-4 py-16 max-w-md space-y-4">
    {
      showExpiredAlert && (
        <StatusAlert
          variant="destructive"
          title="Link resetujący hasło jest nieprawidłowy lub wygasł."
          description="Poproś o nowy link resetujący."
          client:only="react"
        />
      )
    }
    <RequestResetForm client:only="react" />
  </div>
</Layout>
